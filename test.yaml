name: PackagingTest

repository: https://github.com/sagemath/binary-pkg-test
branch: master

build: |
    ./bootstrap
    ./configure --prefix=$(pwd)/local
    make
    make install
    echo "creating absolute symlink"
    mkdir subdirectory
    ln -s $(pwd)/README subdirectory/README-link-sub
    ln -s $(pwd)/README README-link-abs
    ln -s README README-link-rel
    echo $PATH > path.txt

version: |
    echo 1.0

package:
  - name: Full binary tarball
    dist: |
        tar cjf {dist}/test-{version}-{osname}-{arch}.tar.bz2 {path}
    files:
      - include: '**'
    rewrite_path:
      - exclude: '**/*.a'
